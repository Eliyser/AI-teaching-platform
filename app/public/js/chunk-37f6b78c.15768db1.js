(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f6b78c"],{"4d34":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"choiceInfo"},[o("choiceInfo",{attrs:{"get-info":e.stuInfo,"get-list":e.allCourseList}})],1)},r=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.goToaddStu(),e.modal=!0}}},[e._v("新增学生")]),o("Table",{attrs:{border:"",columns:e.columns,data:e.getInfo},scopedSlots:e._u([{key:"action",fn:function(t){t.row;var a=t.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleEdit(a),e.modal=!0}}},[e._v("编辑")])]}}])}),o("Modal",{attrs:{title:"编辑信息"},on:{"on-ok":function(t){return e.ok("formValidate")},"on-cancel":function(t){return e.cancel("formValidate")}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[o("FormItem",{attrs:{label:"ID：",prop:"ID"}},[o("span",[e._v(e._s(e.formValidate.stuId))])]),o("FormItem",{attrs:{label:"Name：",prop:"stuName"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.formValidate.stuName,callback:function(t){e.$set(e.formValidate,"stuName",t)},expression:"formValidate.stuName"}})],1),o("FormItem",{attrs:{label:"Password：",prop:"password"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),o("FormItem",{attrs:{label:"School：",prop:"stuSchool"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.formValidate.stuSchool,callback:function(t){e.$set(e.formValidate,"stuSchool",t)},expression:"formValidate.stuSchool"}})],1),o("FormItem",{attrs:{label:"ChooseCourse：",prop:"visable_course_id"}},[o("CheckboxGroup",{model:{value:e.formValidate.visable_course_id,callback:function(t){e.$set(e.formValidate,"visable_course_id",t)},expression:"formValidate.visable_course_id"}},e._l(e.getList,function(t,a){return o("Checkbox",{key:a,staticStyle:{padding:"0 10px"},attrs:{label:t.course_id}},[o("span",[e._v(e._s(t.course_id+"、"+t.course_name))])])}),1)],1)],1)],1)],1)},n=[],l=(o("7364"),o("eeb9"));function i(e,t){return Object(l["a"])({url:"/api/v1/admin/stuInfo/"+t,method:"PUT",data:e})}var u={props:{getInfo:{type:Array,default:function(){return[]}},getList:{type:Array,default:function(){return[]}}},data:function(){return{modal:!1,formValidate:{stuId:null,stuName:"",password:"",stuSchool:"",visable_course_id:[]},FormJsonArr:{info:[]},ruleValidate:{stuName:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"password cannot be empty",trigger:"blur"},{type:"string",min:3,message:"password at least 3 number",trigger:"blur"}],stuSchool:[{required:!0,message:"The school cannot be empty",trigger:"blur"}]},columns:[{title:"序号",type:"index",width:100,align:"center"},{title:"ID：",key:"stuId"},{title:"学生姓名",key:"stuName"},{title:"学校",key:"stuSchool"},{title:"已选课程",key:"visable_course",render:function(e,t){return e("div",t.row.visable_course.map(function(t){return e("div",{domProps:{innerHTML:t.course_name},style:{margin:"10px 0"}})}))}},{title:"未选课程",key:"hidden_course",render:function(e,t){return e("div",t.row.hidden_course.map(function(t){return e("div",{domProps:{innerHTML:t.course_name},style:{margin:"10px 0"}})}))}},{title:"操作",slot:"action",width:150,align:"center"}]}},methods:{ok:function(e){var t=this;console.log(this.formValidate),this.$refs[e].validate(function(o){o?(t.FormJsonArr.info.push(t.formValidate),console.log(t.FormJsonArr),console.log(t.formValidate.stuId),i(t.FormJsonArr,t.formValidate.stuId).then(function(e){200===e.status?(t.$Message.success("上传数据成功"),console.log(e.msg.msg)):t.$Message.error("上传数据失败")}),t.$refs[e].resetFields()):t.$Message.error("验证错误")}),this.$Message.info("修改成功")},cancel:function(e){this.formValidate={stuId:null,stuName:"",password:"",stuSchool:"",visable_course_id:[]}},handleEdit:function(e){this.formValidate.stuName=this.getInfo[e].stuName,this.formValidate.stuId=this.getInfo[e].stuId,this.formValidate.stuSchool=this.getInfo[e].stuSchool},goToaddStu:function(){this.$router.push("/addStu")}}},c=u,d=o("6691"),m=Object(d["a"])(c,s,n,!1,null,null,null),f=m.exports,p=o("abe8");function h(e){return Object(l["a"])({url:"/api/v1/admin/stuInfo",method:"get",data:e})}var g={components:{choiceInfo:f},data:function(){return{stuInfo:[],TempCourseList:[],allCourseList:[]}},created:function(){var e=this;h().then(function(t){200===t.status&&(e.stuInfo=t.msg.data,console.log(e.stuInfo))}),Object(p["a"])().then(function(t){if(200===t.status){e.TempCourseList=t.msg.data;for(var o=1;o<e.TempCourseList.length;o++)e.allCourseList.push(e.TempCourseList[o]);console.log(e.allCourseList)}})}},b=g,v=Object(d["a"])(b,a,r,!1,null,null,null);t["default"]=v.exports},abe8:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var a=o("eeb9");function r(){return Object(a["a"])({url:"/api/v1/admin/course/all_courses",method:"get",withCredentials:!0})}}}]);