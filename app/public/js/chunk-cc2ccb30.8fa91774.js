(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc2ccb30"],{"2aac":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("eeb9");function r(){return Object(i["a"])({url:"/api/v1/course/tag",method:"get",withCredentials:!0})}},"5f6f":function(e,t,a){"use strict";var i=a("abe5"),r=a.n(i);r.a},a587:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addCourse"},[a("addData")],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addData"},[a("h2",[e._v("新建章节")]),a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"章节名称",prop:"course_name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入章节名称"},model:{value:e.formValidate.course_name,callback:function(t){e.$set(e.formValidate,"course_name",t)},expression:"formValidate.course_name"}})],1),a("FormItem",{attrs:{label:"章节简介",prop:"introduction"}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请填写章节介绍"},model:{value:e.formValidate.introduction,callback:function(t){e.$set(e.formValidate,"introduction",t)},expression:"formValidate.introduction"}})],1),a("FormItem",{attrs:{label:"章节简介图片",prop:"image"}},[a("img",{attrs:{src:"",id:"uploadPicImg",alt:""}}),a("div",{staticClass:"uploadPic",attrs:{id:"uploadPic"},on:{click:e.uploadPicTrigger}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}})],1),a("Button",{attrs:{id:"changeImg",type:"success",round:"",size:"small"},on:{click:e.uploadPicTrigger}},[e._v("更换图片")]),a("form",{staticStyle:{display:"none"},attrs:{id:"uploadPicForm",enctype:"multipart/form-data"}},[a("input",{ref:"filePicField",attrs:{type:"file",name:"file",id:"uploadPicInput"}})])],1),a("FormItem",{attrs:{label:"标签：",prop:"tags"}},[a("CheckboxGroup",{model:{value:e.formValidate.tags,callback:function(t){e.$set(e.formValidate,"tags",t)},expression:"formValidate.tags"}},e._l(e.tagList,function(e){return a("Checkbox",{key:e,attrs:{label:e}})}),1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交")])],1)],1)],1)},l=[],s=(a("7364"),a("2aac")),o={data:function(){return{stepNum:1,formValidate:{course_name:"",introduction:"",image:null,tags:[]},tagList:[],ruleValidate:{course_name:[{required:!0,message:"章节名称不能为空",trigger:"blur"}],introduction:[{required:!0,message:"章节介绍不能为空",trigger:"blur"},{type:"string",min:20,message:"不少于20个字",trigger:"blur"}],image:{required:!0,type:"object",message:"请上传预览图",trigger:"change"},tags:{required:!0,type:"array",min:1,message:"请选择至少一个标签",trigger:"change"}}}},mounted:function(){var e=this;Object(s["a"])().then(function(t){e.tagList=t.msg.data})},methods:{handleSubmit:function(e){var t=this;0!==this.$refs.filePicField.files.length?this.formValidate.image=this.$refs.filePicField.files[0]:this.formValidate.image=null,this.$refs[e].validate(function(e){e?(t.$Message.success("Success!"),console.log(t.formValidate)):t.$Message.error("Fail!")})},handleReset:function(e){this.$refs[e].resetFields()},uploadPicTrigger:function(){this.$refs.filePicField.click(),this.change_pic("uploadPicImg","uploadPicInput")},change_pic:function(e,t){var a=document.getElementById(e),i=document.getElementById(t),r=this.$Message;function n(e){var t=e[0],i=new FileReader;if(!/image\/\w+/.test(t.type))return r.warning("请上传图片文件！"),!1;i.onload=function(e){a.src=e.target.result,document.getElementById("uploadPic").style.display="none",document.getElementById("changeImg").style.display="inline-block"},i.readAsDataURL(t)}window.FileReader&&window.File&&window.FileList&&window.Blob||(a.alt="您的浏览器不支持fileReader"),i.addEventListener("change",function(e){var t=this.files;t.length?n(this.files):(a.src="",document.getElementById("changeImg").style.display="none",document.getElementById("uploadPic").style.display="block")})}}},c=o,d=(a("5f6f"),a("6691")),u=Object(d["a"])(c,n,l,!1,null,null,null),m=u.exports,f={components:{addData:m}},g=f,p=Object(d["a"])(g,i,r,!1,null,null,null);t["default"]=p.exports},abe5:function(e,t,a){}}]);