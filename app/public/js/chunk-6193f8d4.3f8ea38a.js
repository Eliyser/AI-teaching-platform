(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6193f8d4"],{"0857":function(t,e,o){"use strict";o("a0e0");var a=o("a013"),n=o("f425"),r=o("dad2"),s="toString",i=/./[s],l=function(t){o("e5ef")(RegExp.prototype,s,t,!0)};o("b6f1")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?l(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)}):i.name!=s&&l(function(){return i.call(this)})},"4d34":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"choiceInfo"},[o("choiceInfo",{attrs:{"get-info":t.stuInfo,"get-list":t.allCourseList}})],1)},n=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.goToaddStu(),t.modal=!0}}},[t._v("新增学生")]),o("Table",{attrs:{border:"",columns:t.columns,data:t.getInfo},scopedSlots:t._u([{key:"action",fn:function(e){e.row;var a=e.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleEdit(a),t.modal=!0}}},[t._v("编辑")]),o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.handleDelete(a)}}},[t._v("删除")])]}}])}),o("Modal",{attrs:{width:"600",title:"编辑信息"},on:{"on-ok":function(e){return t.ok("formValidate")},"on-cancel":function(e){return t.cancel("formValidate")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[o("FormItem",{attrs:{label:"ID："}},[o("span",[t._v(t._s(t.formValidate.stuId))])]),o("FormItem",{attrs:{label:"Name：",prop:"stuName"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.stuName,callback:function(e){t.$set(t.formValidate,"stuName",e)},expression:"formValidate.stuName"}})],1),o("FormItem",{attrs:{label:"Password：",prop:"password"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1),o("FormItem",{attrs:{label:"School：",prop:"stuSchool"}},[o("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.stuSchool,callback:function(e){t.$set(t.formValidate,"stuSchool",e)},expression:"formValidate.stuSchool"}})],1),o("FormItem",{attrs:{label:"ChooseCourse：",prop:"visable_course_id"}},[o("Transfer",{attrs:{titles:["全部课程","已选课程"],data:t.course,"target-keys":t.targetKeys4,"render-format":t.render4},on:{"on-change":t.handleChange4}})],1)],1)],1)],1)},s=[],i=(o("7364"),o("0857"),o("eeb9"));function l(t,e){return Object(i["a"])({url:"/api/v1/admin/stuInfo/"+e,method:"PUT",data:t})}function u(t){return Object(i["a"])({url:"/api/v1/admin/stuInfo/"+t,method:"DELETE",data:t})}var c={props:{getInfo:{type:Array,default:function(){return[]}},getList:{type:Array,default:function(){return[]}}},data:function(){return{course:this.getMockData(this.formValidate),targetKeys4:this.getTargetKeys(),modal:!1,formValidate:{stuId:null,stuName:"",password:"",stuSchool:"",visable_course_id:[]},FormJsonArr:{info:[]},ruleValidate:{stuName:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"password cannot be empty",trigger:"blur"},{type:"string",min:3,message:"password at least 3 number",trigger:"blur"}],stuSchool:[{required:!0,message:"The school cannot be empty",trigger:"blur"}]},columns:[{title:"序号",type:"index",width:100,align:"center"},{title:"ID：",key:"stuId"},{title:"密码",key:"password"},{title:"学生姓名",key:"stuName"},{title:"学校",key:"stuSchool"},{title:"已选课程",key:"visable_course",render:function(t,e){return t("div",e.row.visable_course.map(function(e){return t("div",{domProps:{innerHTML:e.course_name},style:{margin:"10px 0"}})}))}},{title:"未选课程",key:"hidden_course",render:function(t,e){return t("div",e.row.hidden_course.map(function(e){return t("div",{domProps:{innerHTML:e.course_name},style:{margin:"10px 0"}})}))}},{title:"操作",slot:"action",width:150,align:"center"}]}},methods:{getMockData:function(){for(var t=[],e=1;e<=20;e++)t.push({key:e.toString(),label:"Content "+e,description:"The desc of content  "+e,disabled:3*Math.random()<1});return t},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(t){return t.key})},handleChange4:function(t){this.targetKeys4=t},render4:function(t){return t.label+" - "+t.description},ok:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.FormJsonArr.info.push(e.formValidate),l(e.FormJsonArr,e.formValidate.stuId).then(function(t){200===t.status?(e.$Message.success("上传数据成功"),console.log(t.msg.msg)):e.$Message.error("上传数据失败")})):e.$Message.error("验证错误")}),location.reload(),this.$Message.info("修改成功")},cancel:function(t){this.formValidate={stuId:null,stuName:"",password:"",stuSchool:"",visable_course_id:[]}},handleEdit:function(t){console.log(this.formValidate),this.formValidate.stuName=this.getInfo[t].stuName,this.formValidate.stuId=this.getInfo[t].stuId,this.formValidate.password=this.getInfo[t].password,this.formValidate.stuSchool=this.getInfo[t].stuSchool},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"温馨提示",content:"<p>确认删除此账号吗吗？</p>",loading:!0,onOk:function(){setTimeout(function(){e.$Modal.remove(),console.log(e.getInfo[t].stuId),u(e.getInfo[t].stuId).then(function(o){200===o.status&&(e.$Message.success("删除学生账号成功"),e.getInfo.splice(t,1))}),e.$Message.error("删除学生账号失败")},500)}})},goToaddStu:function(){this.$router.push("/addStu")}}},d=c,f=o("6691"),m=Object(f["a"])(d,r,s,!1,null,null,null),p=m.exports,g=o("abe8");function h(t){return Object(i["a"])({url:"/api/v1/admin/stuInfo",method:"get",data:t})}var b={components:{choiceInfo:p},data:function(){return{stuInfo:[],TempCourseList:[],allCourseList:[]}},mounted:function(){var t=this;h().then(function(e){200===e.status&&(t.stuInfo=e.msg.data,console.log(t.stuInfo))}),Object(g["a"])().then(function(e){if(200===e.status){t.TempCourseList=e.msg.data;for(var o=1;o<t.TempCourseList.length;o++)t.allCourseList.push(t.TempCourseList[o]);console.log(t.allCourseList)}})}},v=b,y=Object(f["a"])(v,a,n,!1,null,null,null);e["default"]=y.exports},a0e0:function(t,e,o){o("dad2")&&"g"!=/./g.flags&&o("ddf7").f(RegExp.prototype,"flags",{configurable:!0,get:o("f425")})},abe8:function(t,e,o){"use strict";o.d(e,"a",function(){return n});var a=o("eeb9");function n(){return Object(a["a"])({url:"/api/v1/admin/course/all_courses",method:"get",withCredentials:!0})}},f425:function(t,e,o){"use strict";var a=o("a013");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}}}]);